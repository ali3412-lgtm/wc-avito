# Удаление функционала генерации CSV

## Дата удаления
13 ноября 2025 года

## Причина
Функционал генерации CSV был удален из плагина, так как основной экспорт производится через XML файл для Avito API.

## Что было удалено

### 1. Файлы
- ✅ **includes/csv-generator.php** - полностью удален
- ✅ **CSV_ATTRIBUTES_GUIDE.md** - документация по атрибутам CSV

### 2. Главный файл плагина (wc-avito-vdom.php)
- Убрано подключение `csv-generator.php`
- Удалены настройки CSV расписания из активации:
  - `wc_avito_csv_schedule_enabled`
  - `wc_avito_csv_schedule_interval`
- Удален вызов `wc_avito_csv_cron_generate_event` из деактивации
- Удалена регистрация настроек CSV

### 3. Админ-панель (includes/admin-menu.php)
- Удалено сохранение настроек CSV расписания
- Удалена обработка формы генерации CSV
- Удалена секция "Генерация CSV" с кнопкой
- Удалена секция "Автоматическая генерация CSV" из настроек
- Удален выбор интервала генерации CSV
- Удалено отображение CSV файла в списке сгенерированных файлов
- Удалена строка CSV в таблице информации о расписании

### 4. CRON задачи (includes/cron.php)
- Удалена инициализация CSV cron задачи из `wc_avito_xml_init_cron()`
- Удален хук `add_action('wc_avito_csv_cron_generate_event', ...)`
- Удалена функция `wc_avito_csv_cron_generate()`
- Удалена секция CSV из `wc_avito_xml_get_next_cron_info()`

## Что осталось

### Основной функционал
- ✅ XML генерация (ручная и автоматическая)
- ✅ Настройки экспорта категорий и товаров
- ✅ Основные объявления
- ✅ Контактная информация
- ✅ Автоматическое расписание для XML
- ✅ Логирование и уведомления
- ✅ Дополнительные поля для товаров и категорий

### Файлы плагина
```
wc-avito/
├── wc-avito-vdom.php (главный файл)
├── includes/
│   ├── admin-menu.php (админ-панель)
│   ├── product-fields.php (поля товаров)
│   ├── xml-generator.php (генератор XML)
│   └── cron.php (расписание)
├── ENUMERATED_VALUES_FIX.md
├── VARIABLE_PRODUCTS_FIX.md
└── CSV_REMOVAL.md (этот файл)
```

## Результат

Плагин теперь полностью сосредоточен на генерации XML для Avito API:
- Упрощенная кодовая база
- Меньше настроек для пользователя
- Более быстрая работа
- Единый формат экспорта (XML)

Все функции работают корректно после удаления CSV функционала.
